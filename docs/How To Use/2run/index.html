
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A benchmark and leaderboard for predicting materials properties">
      
      
      
      <link rel="shortcut icon" href="../../static/matbench_logo_favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-6.1.0">
    
    
      
        <title>2 - Run benchmark on algorithm - MatBench</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bc7e593a.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab28b872.min.css">
        
          
          
          <meta name="theme-color" content="#757575">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="green">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#2-run-benchmark-on-algorithm" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="MatBench" class="md-header-nav__button md-logo" aria-label="MatBench">
      
  <img src="../../static/matbench_logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            MatBench
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              2 - Run benchmark on algorithm
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/hackingmaterials/matbench/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Leaderboard
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Benchmark%20Info/matbench_v0.1/" class="md-tabs__link">
          Benchmark Info
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Full%20Benchmark%20Data/matbench_v0.1_automatminer_expressv2020/" class="md-tabs__link">
          Full Benchmark Data
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../1install/" class="md-tabs__link md-tabs__link--active">
          How To Use
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_dielectric/" class="md-tabs__link">
          Per Task Leaderboards
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MatBench" class="md-nav__button md-logo" aria-label="MatBench">
      
  <img src="../../static/matbench_logo.png" alt="logo">

    </a>
    MatBench
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/hackingmaterials/matbench/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Leaderboard
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Benchmark Info
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Benchmark Info" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Benchmark Info
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Benchmark%20Info/matbench_v0.1/" class="md-nav__link">
      Benchmark info for `matbench_v0.1`
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Benchmark%20Info/notes/" class="md-nav__link">
      Notes on Benchmarking
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Full Benchmark Data
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Full Benchmark Data" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Full Benchmark Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Full%20Benchmark%20Data/matbench_v0.1_automatminer_expressv2020/" class="md-nav__link">
      matbench_v0.1: AMMExpress v2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Full%20Benchmark%20Data/matbench_v0.1_cgcnnv2019/" class="md-nav__link">
      matbench_v0.1: CGCNN v2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Full%20Benchmark%20Data/matbench_v0.1_dummy/" class="md-nav__link">
      matbench_v0.1: Dummy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Full%20Benchmark%20Data/matbench_v0.1_rf/" class="md-nav__link">
      matbench_v0.1: RF-SCM/Magpie
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      How To Use
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="How To Use" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        How To Use
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../1install/" class="md-nav__link">
      1 - Install matbench
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        2 - Run benchmark on algorithm
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      2 - Run benchmark on algorithm
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recording-your-data" class="md-nav__link">
    Recording your data
  </a>
  
    <nav class="md-nav" aria-label="Recording your data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note-benchmark-subsets" class="md-nav__link">
    Note: Benchmark subsets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recording-hyperparameters-and-user-metadata" class="md-nav__link">
    Recording hyperparameters and user metadata
  </a>
  
    <nav class="md-nav" aria-label="Recording hyperparameters and user metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hyperparameters-for-each-fold" class="md-nav__link">
    Hyperparameters for each fold
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-metadata-for-benchmark" class="md-nav__link">
    User metadata for benchmark
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../3submit/" class="md-nav__link">
      3 - Submit to leaderboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../advanced/" class="md-nav__link">
      Advanced usage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Per Task Leaderboards
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Per Task Leaderboards" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Per Task Leaderboards
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_dielectric/" class="md-nav__link">
      matbench_v0.1 matbench_dielectric
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_expt_gap/" class="md-nav__link">
      matbench_v0.1 matbench_expt_gap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_expt_is_metal/" class="md-nav__link">
      matbench_v0.1 matbench_expt_is_metal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_glass/" class="md-nav__link">
      matbench_v0.1 matbench_glass
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_jdft2d/" class="md-nav__link">
      matbench_v0.1 matbench_jdft2d
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_log_gvrh/" class="md-nav__link">
      matbench_v0.1 matbench_log_gvrh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_log_kvrh/" class="md-nav__link">
      matbench_v0.1 matbench_log_kvrh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_mp_e_form/" class="md-nav__link">
      matbench_v0.1 matbench_mp_e_form
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_mp_gap/" class="md-nav__link">
      matbench_v0.1 matbench_mp_gap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_mp_is_metal/" class="md-nav__link">
      matbench_v0.1 matbench_mp_is_metal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_perovskites/" class="md-nav__link">
      matbench_v0.1 matbench_perovskites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_phonons/" class="md-nav__link">
      matbench_v0.1 matbench_phonons
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Per-Task%20Leaderboards/matbench_v0.1_matbench_steels/" class="md-nav__link">
      matbench_v0.1 matbench_steels
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recording-your-data" class="md-nav__link">
    Recording your data
  </a>
  
    <nav class="md-nav" aria-label="Recording your data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note-benchmark-subsets" class="md-nav__link">
    Note: Benchmark subsets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recording-hyperparameters-and-user-metadata" class="md-nav__link">
    Recording hyperparameters and user metadata
  </a>
  
    <nav class="md-nav" aria-label="Recording hyperparameters and user metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hyperparameters-for-each-fold" class="md-nav__link">
    Hyperparameters for each fold
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-metadata-for-benchmark" class="md-nav__link">
    User metadata for benchmark
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/hackingmaterials/matbench/edit/master/docs/How To Use/2run.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="2-run-benchmark-on-algorithm">2 - Run benchmark on algorithm</h1>
<h2 id="recording-your-data">Recording your data</h2>
<p>You can use the matbench python package to retrieve the training and testing splits as well as
record new predictions. Recording and saving your data with matbench should take no more than 
10 lines of matbench code.</p>
<p>The only things you need are:</p>
<ol>
<li>Your algorithm/model - we'll call it <code>my_model</code> in this example</li>
<li>The <code>MatbenchBenchmark</code> class.</li>
</ol>
<p>Here's an example of running an entire benchmark (13 tasks) using matbench.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">matbench.bench</span> <span class="kn">import</span> <span class="n">MatbenchBenchmark</span>

<span class="n">mb</span> <span class="o">=</span> <span class="n">MatbenchBenchmark</span><span class="p">(</span><span class="n">autoload</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">mb</span><span class="o">.</span><span class="n">tasks</span><span class="p">:</span>
    <span class="n">task</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">fold</span> <span class="ow">in</span> <span class="n">task</span><span class="o">.</span><span class="n">folds</span><span class="p">:</span>

        <span class="c1"># Inputs are either chemical compositions as strings</span>
        <span class="c1"># or crystal structures as pymatgen.Structure objects.</span>
        <span class="c1"># Outputs are either floats (regression tasks) or bools (classification tasks)</span>
        <span class="n">train_inputs</span><span class="p">,</span> <span class="n">train_outputs</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">get_train_and_val_data</span><span class="p">(</span><span class="n">fold</span><span class="p">)</span>

        <span class="c1"># train and validate your model</span>
        <span class="n">my_model</span><span class="o">.</span><span class="n">train_and_validate</span><span class="p">(</span><span class="n">train_inputs</span><span class="p">,</span> <span class="n">train_outputs</span><span class="p">)</span>

        <span class="c1"># Get testing data</span>
        <span class="n">test_inputs</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">get_test_data</span><span class="p">(</span><span class="n">fold</span><span class="p">,</span> <span class="n">include_target</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Predict on the testing data</span>
        <span class="c1"># Your output should be a pandas series, numpy array, or python iterable</span>
        <span class="c1"># where the array elements are floats or bools</span>
        <span class="n">predictions</span> <span class="o">=</span> <span class="n">my_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test_inputs</span><span class="p">)</span>

        <span class="c1"># Record your data!</span>
        <span class="n">task</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">fold</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)</span>

<span class="c1"># Save your results</span>
<span class="n">mb</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;my_models_benchmark.json.gz&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>And you're done! Your benchmark has been recorded and saved.</strong></p>
<p>The output file, in this case <code>my_models_benchmark.json.gz</code> contains everything predicted by your 
benchmark. <strong>Keep this file, as it is the core result that will be submitted to the leaderboard.</strong></p>
<p>Please see the docs for <a href="../3submit/">Submitting to leaderboard</a> to learn how to upload your data to the automated leaderboard.</p>
<h3 id="note-benchmark-subsets">Note: Benchmark subsets</h3>
<p>If you want to benchmark on a subset of Matbench tasks, set the <code>subset</code> argument when creating <code>MatbenchBenchmark</code>
and use the same code as above. The repo accepts subsets of matbench tasks as well which will appear on a separate "task-specific" leaderboard.</p>
<hr />
<h2 id="recording-hyperparameters-and-user-metadata">Recording hyperparameters and user metadata</h2>
<h3 id="hyperparameters-for-each-fold">Hyperparameters for each fold</h3>
<p>Record parameters (<code>dict</code> type) for each fold using the <code>parameters</code> argument to <code>MatbenchBenchmark.record</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">matbench.bench</span> <span class="kn">import</span> <span class="n">MatbenchBenchmark</span>

<span class="n">mb</span> <span class="o">=</span> <span class="n">MatbenchBenchmark</span><span class="p">(</span><span class="n">autoload</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">mb</span><span class="o">.</span><span class="n">tasks</span><span class="p">:</span>
    <span class="n">task</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">fold</span> <span class="ow">in</span> <span class="n">task</span><span class="o">.</span><span class="n">folds</span><span class="p">:</span>
        <span class="n">train_inputs</span><span class="p">,</span> <span class="n">train_outputs</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">get_train_and_val_data</span><span class="p">(</span><span class="n">fold</span><span class="p">)</span>
        <span class="n">my_model</span><span class="o">.</span><span class="n">train_and_validate</span><span class="p">(</span><span class="n">train_inputs</span><span class="p">,</span> <span class="n">train_outputs</span><span class="p">)</span>
        <span class="n">test_inputs</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">get_test_data</span><span class="p">(</span><span class="n">fold</span><span class="p">,</span> <span class="n">include_target</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">predictions</span> <span class="o">=</span> <span class="n">my_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test_inputs</span><span class="p">)</span>

        <span class="c1"># Get your model&#39;s parameters </span>
        <span class="c1"># Parameters must be a dictionary of python native types, e.g., lists of strings, dicts, etc.</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">my_model</span><span class="o">.</span><span class="n">get_parameters_as_dictionary</span><span class="p">()</span>
        <span class="n">task</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">fold</span><span class="p">,</span> <span class="n">predictions</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
</code></pre></div>
<p>We recommend you record the hyperparameters on each fold - but it is optional. </p>
<p>Your parameters can be freeform, though we encourage brevity - only recording the most important parameters, 
not large arrays or weight matrices.</p>
<h3 id="user-metadata-for-benchmark">User metadata for benchmark</h3>
<p>Add arbitrary metadata about your algorthm, in <code>dict</code> format, to the benchmark. This will be included as shown on the benchmark leaderboard on the website.</p>
<div class="highlight"><pre><span></span><code><span class="n">my_metadata</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;algorithm_version&quot;</span><span class="p">:</span> <span class="s2">&quot;v1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tree_type&quot;</span><span class="p">:</span> <span class="s2">&quot;entropy&quot;</span><span class="p">,</span>
    <span class="s2">&quot;configuration&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;some_param&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;other_vector&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">mb</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">my_metadata</span><span class="p">)</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../1install/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                1 - Install matbench
              </div>
            </div>
          </a>
        
        
          <a href="../3submit/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                3 - Submit to leaderboard
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            HackingMaterials
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.6a3d08fc.min.js"></script>
      <script src="../../assets/javascripts/bundle.71201edf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['navigation.tabs', 'navigation.tabs.sticky'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>